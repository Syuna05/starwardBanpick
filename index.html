<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>キャラBANピックボード - BAN演出強化版</title>
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --panel-bg: rgba(25, 25, 25, 0.98);
            --neon-blue: #00d2ff;
            --neon-red: #ff0055;
            --white-border: #ffffff;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-dark);
            background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('back.png');
            background-attachment: fixed;
            background-position: center;
            background-size: cover;
            color: white;
            margin: 0;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        @media (min-width: 1024px) {
            .container { flex-direction: row; align-items: flex-start; margin-top: 20px; }
        }

        /* ボードエリア */
        .board { flex: 1.2; display: flex; flex-direction: column; gap: 20px; }

        .player-section {
            background: rgba(0,0,0,0.5);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .player-header {
            font-size: 16px; font-weight: bold; margin-bottom: 10px;
            padding: 4px 12px; border-left: 4px solid var(--neon-blue);
            background: rgba(0,0,0,0.6); display: inline-block;
        }
        .header-b { border-left-color: var(--neon-red); }

        /* スロットを2列にして巨大化（スマホ対応） */
        .slot-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }

        @media (min-width: 600px) {
            .slot-grid { grid-template-columns: repeat(4, 1fr); }
        }

        .slot {
            aspect-ratio: 1/1; background: rgba(0,0,0,0.8);
            border: 3px solid var(--white-border); border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            position: relative; overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        .slot img { width: 100%; height: 100%; object-fit: contain; transition: all 0.3s ease; }

        /* --- 追加：BAN時の演出 --- */
        .slot.is-banned img { 
            filter: brightness(0.2) grayscale(1); /* 暗く＆白黒に */
            transform: scale(0.9); /* 少し小さくして脱落感を演出 */
        }

        .slot.is-banned::after {
            content: "×"; 
            position: absolute; 
            top: 50%; left: 50%;
            transform: translate(-50%, -52%); /* ✖の位置微調整 */
            color: var(--neon-red);
            font-size: 120px; /* 巨大な✖ */
            font-weight: bold; 
            text-shadow: 0 0 20px #000, 0 0 10px rgba(255,0,85,0.8);
            z-index: 10;
            pointer-events: none;
            line-height: 1;
        }
        /* ----------------------- */

        .controls {
            width: 100%;
            max-width: 500px;
            background: var(--panel-bg);
            padding: 15px;
            border-radius: 15px;
            box-sizing: border-box;
            border: 1px solid #444;
            margin: 0 auto;
        }

        .mode-tabs { display: flex; gap: 8px; margin-bottom: 15px; }
        .tab-btn { 
            flex: 1; padding: 15px; border: none; border-radius: 10px; 
            background: #1a1a1a; color: #888; font-weight: bold; font-size: 16px;
        }
        .tab-btn.active-pick { background: var(--neon-blue); color: #000; }
        .tab-btn.active-ban { background: var(--neon-red); color: #fff; }

        .cost-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px; }
        .cost-btn { padding: 12px; font-size: 14px; background: #222; border: 1px solid #444; color: #fff; border-radius: 8px; }
        .cost-btn.active { background: #ff4500; border-color: #ff4500; font-weight: bold; }

        .pool {
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 12px;
            max-height: 450px; 
            overflow-y: auto; 
            background: #000; 
            padding: 12px; 
            border-radius: 10px;
            border: 1px solid #333;
        }

        .pool img { 
            width: 100%; aspect-ratio: 1/1; object-fit: contain; 
            border-radius: 8px; border: 2px solid #333; background: #111;
        }
        .pool img.selected { border-color: var(--neon-blue); box-shadow: 0 0 12px var(--neon-blue); transform: scale(1.05); }

        .sys-reset { margin-top: 15px; width: 100%; padding: 15px; background: #333; color: #fff; border-radius: 10px; font-weight: bold; border: none; }
        .status { font-size: 14px; color: #ffaa00; text-align: center; margin-top: 12px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="board">
        <div class="player-section">
            <div class="player-header" id="nameA" onclick="editName('A')">PLAYER A</div>
            <div class="slot-grid">
                <div class="slot" id="s1" onclick="tapSlot(this)"></div>
                <div class="slot" id="s2" onclick="tapSlot(this)"></div>
                <div class="slot" id="s3" onclick="tapSlot(this)"></div>
                <div class="slot" id="s4" onclick="tapSlot(this)"></div>
            </div>
        </div>
        <div class="player-section">
            <div class="player-header header-b" id="nameB" onclick="editName('B')">PLAYER B</div>
            <div class="slot-grid">
                <div class="slot" id="s5" onclick="tapSlot(this)"></div>
                <div class="slot" id="s6" onclick="tapSlot(this)"></div>
                <div class="slot" id="s7" onclick="tapSlot(this)"></div>
                <div class="slot" id="s8" onclick="tapSlot(this)"></div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="mode-tabs">
            <button id="mPick" class="tab-btn active-pick" onclick="setMode('pick')">PICK</button>
            <button id="mBan" class="tab-btn" onclick="setMode('ban')">BAN</button>
        </div>
        <div id="uiPick">
            <div class="cost-row">
                <button class="cost-btn active" onclick="loadPool('15', this)">C15</button>
                <button class="cost-btn" onclick="loadPool('20', this)">C20</button>
                <button class="cost-btn" onclick="showCostWrapper('25', this)">C25</button>
                <button class="cost-btn" onclick="showCostWrapper('30', this)">C30</button>
            </div>
            <div class="pool" id="poolGrid"></div>
        </div>
        <button class="sys-reset" onclick="resetAll()">SYSTEM RESET</button>
        <div class="status" id="hint">キャラを選択 → スロットをタップ</div>
    </div>
</div>

<script>
let mode = 'pick';
let selected = null;

const data = {
    "15": ["Katerina.png", "Orchid.png", "Roland.png", "Snowowl.png", "Yammyn.png"],
    "20": ["Aida.png", "Beta.png", "Borzoi.png", "Breaker.png", "Darkstar.png", "Deucalion.png", "Emika.png", "Franca.png", "Hibiki.png", "ice.png", "Kitty.png", "kurisu.png", "kuro.png", "Pallas.png", "Qingni.png", "Scorpion.png", "Seraph.png", "suteko.png", "Virtues.png", "Zakharova.png"],
    "25": ["Aliz.png", "Angelis.png", "baze.png", "Cygnus.png", "doragu.png", "Ffreedo.png", "gouraikai.png", "haruka.png", "Ine.png", "Iva.png", "Kaze.png", "Lancelot.png", "Nora.png", "reki.png", "sanboruto.png", "Sharp.png", "sirogara-Photoroom.png", "Skysaber.png", "Valkia.png", "Xiaoling.png", "XVIII.png", "zyem.png"],
    "30": ["Akigumo.png", "Cammy.png", "Cavalry.png", "Cherub.png", "Convallaria.png", "Elfin.png", "Ether.png", "Griffin.png", "Hikari.png", "LonginusBeta.png", "Qiuyu.png", "Rasiel.png", "Rhine.png", "Rota.png", "Shadow.png", "Siren.png", "Mumei.png", "Uesama.png"]
};

function showCostWrapper(c, btn) { loadPool(c, btn); }

function setMode(m) {
    mode = m;
    document.getElementById('mPick').className = m==='pick'?'tab-btn active-pick':'tab-btn';
    document.getElementById('mBan').className = m==='ban'?'tab-btn active-ban':'tab-btn';
    document.getElementById('hint').innerText = m==='pick'?'キャラを選択 → スロットをタップ':'BANするキャラをタップ';
    selected = null;
    document.querySelectorAll('.pool img').forEach(i => i.classList.remove('selected'));
}

function loadPool(c, btn) {
    document.querySelectorAll('.cost-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const grid = document.getElementById('poolGrid');
    grid.innerHTML = '';
    data[c].forEach(f => {
        const img = document.createElement('img');
        img.src = `${c}/${f}`;
        img.onclick = () => {
            if(mode!=='pick') return;
            document.querySelectorAll('.pool img').forEach(i => i.classList.remove('selected'));
            img.classList.add('selected');
            selected = { src: img.src, file: f };
        };
        grid.appendChild(img);
    });
}

function tapSlot(slot) {
    const hasImg = slot.querySelector('img');
    if(mode === 'pick') {
        if(selected) {
            const isA = ["s1","s2","s3","s4"].includes(slot.id);
            const group = isA ? ['s1','s2','s3','s4'] : ['s5','s6','s7','s8'];
            if(group.some(id => document.getElementById(id).querySelector('img')?.dataset.file === selected.file)) {
                alert("重複配置はできません"); return;
            }
            slot.innerHTML = `<img src="${selected.src}" data-file="${selected.file}">`;
            slot.classList.remove('is-banned');
            selected = null;
            document.querySelectorAll('.pool img').forEach(i => i.classList.remove('selected'));
        } else if(hasImg) {
            slot.innerHTML = '';
            slot.classList.remove('is-banned');
        }
    } else {
        if(!hasImg) return;
        if(slot.classList.contains('is-banned')) {
            slot.classList.remove('is-banned');
        } else {
            // 合計で2体までBAN可能
            if(document.querySelectorAll('.is-banned').length < 2) slot.classList.add('is-banned');
        }
    }
}

function editName(p) {
    const el = document.getElementById('name'+p);
    const n = prompt("名前を入力:", el.innerText);
    if(n) el.innerText = n.toUpperCase();
}

function resetAll() {
    if(confirm("全消去しますか？")) {
        document.querySelectorAll('.slot').forEach(s => { s.innerHTML = ''; s.classList.remove('is-banned'); });
    }
}

loadPool('15', document.querySelector('.cost-btn'));
</script>
</body>
</html>